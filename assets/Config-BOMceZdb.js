import{k as Q,a4 as le,i as e,c as t,S as T,d as f,a5 as y,a2 as W,N as Z,F,a1 as ae,ay as ne,p as J,P as se,b as p,D as R,a3 as K,v as re}from"./vendor-LFOJg3vZ.js";import{u as j,ae as ie,af as M,ag as ce,B as E,ah as k,ai as oe,aj as de,ak as ue,al as ge,am as pe,an as he,ao as ve,ap as fe,aq as me,ar as be,b as _e,as as $e,at as O,au as z,av as xe,aw as Ce,ad as ke,ax as ye,ay as H,az as Se,aA as X,aB as we,aC as De,aD as Ee,aE as Te,aF as Ne,aG as Pe}from"./index-cYOqtyO9.js";import{C as S}from"./ConfigTitle-hXjZ_Yxi.js";const Ae=f('<div class="flex flex-col p-4">'),Ie=f('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type=search name=name class="input input-bordered min-w-0 flex-1"placeholder=google.com><div class="flex items-center gap-2"><select name=type class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Fe=f("<div class=py-2>"),Le=f('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Be=f('<div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class=form-control><label for=enable-tun-device class="label gap-2"><span class=label-text></span></label><input id=enable-tun-device type=checkbox class=toggle></div><div class=form-control><label for=tun-ip-stack class="label gap-2"><span class=label-text></span></label><select id=tun-ip-stack class="select select-bordered flex-1"><option>Mixed</option><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class=form-control><label for=device-name class="label gap-2"><span class=label-text></span></label><input id=device-name class="input input-bordered min-w-0"></div><div class=form-control><label for=interface-name class="label gap-2"><span class=label-text></span></label><input id=interface-name class="input input-bordered min-w-0">'),Re=f('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),je=f('<div class=form-control><label class=label><span class=label-text></span></label><input type=number class="input input-bordered">'),Oe=f('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),Ge=f('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div><div class="flex flex-col"><select class="select select-bordered"></select></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle>'),G=f("<option>"),Me=f('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),Qe=f('<div class="grid grid-cols-2 gap-4"><kbd class=kbd></kbd><div class=relative><kbd class="kbd w-full">'),Ue=f('<div class="mx-auto flex max-w-screen-md flex-col gap-4">'),qe=y.object({name:y.string(),type:y.string()}),Ve=()=>{const[s]=j(),l=ce(),{form:_,isSubmitting:n}=W({extend:K({schema:qe}),onSubmit:h=>l.get("dns/query",{searchParams:{name:h.name,type:h.type}}).json().then(({Answer:r})=>x((r==null?void 0:r.map(({data:d})=>d))||[])).catch(r=>re.error(r.message))}),[m,x]=Q([]);return(()=>{const h=Ie(),r=h.firstChild,d=r.firstChild,a=d.nextSibling;return a.firstChild,Z(_,r,()=>_),e(a,t(E,{type:"submit",class:"btn-primary",get loading(){return n()},get children(){return s("dnsQuery")}}),null),e(h,t(T,{get when(){return m().length>0},get children(){const $=Ae();return e($,t(F,{get each(){return m()},children:o=>(()=>{const g=Fe();return e(g,o),g})()})),$}}),null),h})()},ze=y.object({port:y.number(),"socks-port":y.number(),"redir-port":y.number(),"tproxy-port":y.number(),"mixed-port":y.number()}),He=({backendVersion:s})=>{const[l]=j(),_=ae(),n=[{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:a=>void k("port",Number(a.target.value),d)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:a=>void k("socks-port",Number(a.target.value),d)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:a=>void k("redir-port",Number(a.target.value),d)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:a=>void k("tproxy-port",Number(a.target.value),d)},{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:a=>void k("mixed-port",Number(a.target.value),d)}],{form:m,setInitialValues:x,reset:h}=W({extend:K({schema:ze})}),[r,{refetch:d}]=ne(Pe);return J(()=>{const a=r();a&&(x(a),h())}),(()=>{const a=Re(),$=a.firstChild,o=$.firstChild,g=o.nextSibling,w=g.nextSibling,C=$.nextSibling;return $.addEventListener("change",u=>void k("mode",u.target.value,d)),e(o,()=>l("global")),e(g,()=>l("rule")),e(w,()=>l("direct")),e(a,t(T,{get when(){return!M(s())},get children(){return[(()=>{const u=Le();return Z(m,u,()=>m),e(u,t(F,{each:n,children:i=>(()=>{const v=je(),N=v.firstChild,L=N.firstChild,D=N.nextSibling;return e(L,()=>i.label()),se(D,"change",i.onChange),p(b=>{const B=i.key,P=i.key,A=i.key,I=i.label();return B!==b._v$&&R(N,"for",b._v$=B),P!==b._v$2&&R(D,"id",b._v$2=P),A!==b._v$3&&R(D,"name",b._v$3=A),I!==b._v$4&&R(D,"placeholder",b._v$4=I),b},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),v})()})),u})(),(()=>{const u=Be(),i=u.firstChild,v=i.firstChild,N=v.firstChild,L=v.nextSibling,D=i.nextSibling,b=D.firstChild,B=b.firstChild,P=b.nextSibling,A=D.nextSibling,I=A.firstChild,Y=I.firstChild,U=I.nextSibling,ee=A.nextSibling,q=ee.firstChild,te=q.firstChild,V=q.nextSibling;return e(N,()=>l("enableTunDevice")),L.addEventListener("change",c=>void k("tun",{enable:c.target.checked},d)),e(B,()=>l("tunModeStack")),P.addEventListener("change",c=>void k("tun",{stack:c.target.value},d)),e(Y,()=>l("tunDeviceName")),U.addEventListener("change",c=>void k("tun",{device:c.target.value},d)),e(te,()=>l("interfaceName")),V.addEventListener("change",c=>void k("interface-name",c.target.value,d)),p(()=>{var c;return L.checked=(c=r())==null?void 0:c.tun.enable}),p(()=>{var c;return P.value=(c=r())==null?void 0:c.tun.stack}),p(()=>{var c;return U.value=(c=r())==null?void 0:c.tun.device}),p(()=>{var c;return V.value=(c=r())==null?void 0:c["interface-name"]}),u})()]}}),C),e(C,t(E,{class:"btn-primary",get loading(){return oe()},onClick:de,get children(){return l("reloadConfig")}}),null),e(C,t(E,{class:"btn-secondary",get loading(){return ue()},onClick:ge,get children(){return l("updateGEODatabases")}}),null),e(C,t(E,{class:"btn-accent",get loading(){return pe()},onClick:he,get children(){return l("flushFakeIP")}}),null),e(C,t(T,{get when(){return!M(s())},get children(){return t(E,{class:"btn-error",get loading(){return ve()},onClick:fe,get children(){return l("upgradeCore")}})}}),null),e(C,t(E,{class:"btn-warning",get loading(){return me()},onClick:be,get children(){return l("restartCore")}}),null),e(C,t(E,{class:"btn-info",onClick:()=>{_e(""),_($e.Setup)},get children(){return l("switchEndpoint")}}),null),p(()=>{var u;return $.value=(u=r())==null?void 0:u.mode}),p(()=>o.value=O.Global),p(()=>g.value=O.Rule),p(()=>w.value=O.Direct),a})()},Xe=()=>{const[s]=j(),l=[{label:()=>s("en"),value:z.EN},{label:()=>s("zh"),value:z.ZH}];return(()=>{const _=Ge(),n=_.firstChild,m=n.firstChild,x=m.firstChild,h=m.nextSibling,r=h.firstChild,d=n.nextSibling,a=d.firstChild,$=a.firstChild;return e(m,t(S,{get children(){return s("useTwemoji")}}),x),x.addEventListener("change",o=>xe(o.target.checked)),e(h,t(S,{get children(){return s("switchLanguage")}}),r),r.addEventListener("change",o=>Ce(o.target.value)),e(r,t(F,{each:l,children:o=>(()=>{const g=G();return e(g,()=>o.label()),p(()=>g.selected=ke()===o.value),p(()=>g.value=o.value),g})()})),e(a,t(S,{get children(){return s("autoSwitchTheme")}}),$),$.addEventListener("change",o=>ye(o.target.checked)),e(d,t(T,{get when(){return H()},get children(){const o=Oe(),g=o.firstChild,w=g.firstChild,C=g.nextSibling,u=C.firstChild;return e(g,t(S,{get children(){return s("favDayTheme")}}),w),w.addEventListener("change",i=>Se(i.target.value)),e(w,t(F,{each:X,children:i=>(()=>{const v=G();return v.value=i,e(v,i),v})()})),e(C,t(S,{get children(){return s("favNightTheme")}}),u),u.addEventListener("change",i=>we(i.target.value)),e(u,t(F,{each:X,children:i=>(()=>{const v=G();return v.value=i,e(v,i),v})()})),p(()=>w.value=De()),p(()=>u.value=Ee()),o}}),null),p(()=>x.checked=Te()),p(()=>$.checked=H()),_})()},We=({backendVersion:s})=>{const[l,_]=Q(!1);return J(async()=>{const n=s();n&&_(await Ne(n))}),(()=>{const n=Qe(),m=n.firstChild,x=m.nextSibling,h=x.firstChild;return e(m,()=>"1.133.1"),e(x,t(T,{get when(){return l()},get children(){return Me()}}),h),e(h,s),n})()},Ye=()=>{const[s]=j(),[l,_]=Q("");return le(async()=>{_(await ie())}),(()=>{const n=Ue();return e(n,t(T,{get when(){return!M(l())},get children(){return[t(S,{withDivider:!0,get children(){return s("dnsQuery")}}),t(Ve,{})]}}),null),e(n,t(S,{withDivider:!0,get children(){return s("coreConfig")}}),null),e(n,t(He,{backendVersion:l}),null),e(n,t(S,{withDivider:!0,get children(){return s("xdConfig")}}),null),e(n,t(Xe,{}),null),e(n,t(S,{withDivider:!0,get children(){return s("version")}}),null),e(n,t(We,{backendVersion:l}),null),n})()};export{Ye as default};
